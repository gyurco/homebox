diff -rup -x '*.o' -x '*.so' -x '*.inst' samba-4.3.0.orig/lib/util/become_daemon.c samba-4.3.0/lib/util/become_daemon.c
--- samba-4.3.0.orig/lib/util/become_daemon.c	2015-07-21 11:47:49.000000000 +0200
+++ samba-4.3.0/lib/util/become_daemon.c	2015-09-26 13:18:57.187702164 +0200
@@ -24,7 +24,7 @@
 #include "includes.h"
 #include "system/filesys.h"
 #include "system/locale.h"
-#if HAVE_LIBSYSTEMD_DAEMON
+#if HAVE_LIBSYSTEMD
 #include <systemd/sd-daemon.h>
 #endif
 #include "lib/util/close_low_fd.h"
@@ -69,9 +69,9 @@ _PUBLIC_ void become_daemon(bool do_fork
 	if (do_fork) {
 		newpid = fork();
 		if (newpid) {
-#if HAVE_LIBSYSTEMD_DAEMON
+#if HAVE_LIBSYSTEMD
 			sd_notifyf(0, "READY=0\nSTATUS=Starting process...\nMAINPID=%lu", (unsigned long) newpid);
-#endif /* HAVE_LIBSYSTEMD_DAEMON */
+#endif /* HAVE_LIBSYSTEMD */
 			_exit(0);
 		}
 	}
@@ -98,7 +98,7 @@ _PUBLIC_ void become_daemon(bool do_fork
 
 _PUBLIC_ void exit_daemon(const char *msg, int error)
 {
-#ifdef HAVE_LIBSYSTEMD_DAEMON
+#ifdef HAVE_LIBSYSTEMD
 	if (msg == NULL) {
 		msg = strerror(error);
 	}
@@ -117,7 +117,7 @@ _PUBLIC_ void daemon_ready(const char *n
 	if (name == NULL) {
 		name = "Samba";
 	}
-#ifdef HAVE_LIBSYSTEMD_DAEMON
+#ifdef HAVE_LIBSYSTEMD
 	sd_notifyf(0, "READY=1\nSTATUS=%s: ready to serve connections...", name);
 #endif
 	DEBUG(0, ("STATUS=daemon '%s' finished starting up and ready to serve "
@@ -129,7 +129,7 @@ _PUBLIC_ void daemon_status(const char *
 	if (name == NULL) {
 		name = "Samba";
 	}
-#ifdef HAVE_LIBSYSTEMD_DAEMON
+#ifdef HAVE_LIBSYSTEMD
 	sd_notifyf(0, "\nSTATUS=%s: %s", name, msg);
 #endif
 	DEBUG(0, ("STATUS=daemon '%s' : %s", name, msg));
diff -rup -x '*.o' -x '*.so' -x '*.inst' samba-4.3.0.orig/lib/util/debug.c samba-4.3.0/lib/util/debug.c
--- samba-4.3.0.orig/lib/util/debug.c	2015-07-21 11:47:49.000000000 +0200
+++ samba-4.3.0/lib/util/debug.c	2015-09-26 13:18:37.663322672 +0200
@@ -102,7 +102,7 @@ static struct {
 	.fd = 2 /* stderr by default */
 };
 
-#if defined(WITH_SYSLOG) || defined(HAVE_LIBSYSTEMD_JOURNAL)
+#if defined(WITH_SYSLOG) || defined(HAVE_LIBSYSTEMD)
 static int debug_level_to_priority(int level)
 {
 	/*
@@ -179,7 +179,7 @@ static void debug_syslog_log(int msg_lev
 }
 #endif /* WITH_SYSLOG */
 
-#ifdef HAVE_LIBSYSTEMD_JOURNAL
+#ifdef HAVE_LIBSYSTEMD
 #include <systemd/sd-journal.h>
 static void debug_systemd_log(int msg_level,
 			      const char *msg, const char *msg_no_nl)
@@ -251,7 +251,7 @@ static struct debug_backend {
 	},
 #endif
 
-#ifdef HAVE_LIBSYSTEMD_JOURNAL
+#ifdef HAVE_LIBSYSTEMD
 	{
 		.name = "systemd",
 		.log = debug_systemd_log,
diff -rup -x '*.o' -x '*.so' -x '*.inst' samba-4.3.0.orig/lib/util/wscript_build samba-4.3.0/lib/util/wscript_build
--- samba-4.3.0.orig/lib/util/wscript_build	2015-09-08 15:45:25.000000000 +0200
+++ samba-4.3.0/lib/util/wscript_build	2015-09-26 13:03:45.289706636 +0200
@@ -83,7 +83,7 @@ if not bld.env.SAMBA_UTIL_CORE_ONLY:
                     tevent_debug.c util_process.c memcache.c''',
                   deps='samba-util-core DYNCONFIG close-low-fd tini tiniparser genrand',
 
-                  public_deps='talloc tevent execinfo pthread LIBCRYPTO charset util_setid systemd systemd-daemon',
+                  public_deps='talloc tevent execinfo pthread LIBCRYPTO charset util_setid systemd',
                   public_headers='debug.h attr.h byteorder.h data_blob.h memory.h safe_string.h time.h talloc_stack.h xfile.h dlinklist.h samba_util.h string_wrappers.h idtree.h idtree_random.h blocking.h signal.h substitute.h fault.h genrand.h',
                   header_path= [ ('dlinklist.h samba_util.h', '.'), ('*', 'util') ],
                   local_include=False,
